# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—é –º—ñ–≥—Ä–∞—Ü—ñ—ó 019_add_performance_indexes.sql

## üìã –©–æ —Ä–æ–±–∏—Ç—å —Ü—è –º—ñ–≥—Ä–∞—Ü—ñ—è?

–¶—è –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—î **15 –∫–æ–º–ø–æ–∑–∏—Ç–Ω–∏—Ö —ñ–Ω–¥–µ–∫—Å—ñ–≤** –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤:
- 7 —ñ–Ω–¥–µ–∫—Å—ñ–≤ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `assigned_tasks`
- 4 —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `users`
- 2 —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ `tasks`
- 2 —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å

## üöÄ –ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [https://supabase.com](https://supabase.com)
2. –£–≤—ñ–π–¥—ñ—Ç—å —É —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç
3. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç **alfa-gold-timetracker**

### –ö—Ä–æ–∫ 2: –í—ñ–¥–∫—Ä–∏–π—Ç–µ SQL Editor

1. –£ –ª—ñ–≤–æ–º—É –º–µ–Ω—é –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ **SQL Editor**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **New query** (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ—Å–Ω—É—é—á–∏–π –∑–∞–ø–∏—Ç)

### –ö—Ä–æ–∫ 3: –°–∫–æ–ø—ñ—é–π—Ç–µ SQL –∫–æ–¥

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `supabase/migrations/019_add_performance_indexes.sql` —É –≤–∞—à–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ
2. –°–∫–æ–ø—ñ—é–π—Ç–µ **–≤–µ—Å—å –≤–º—ñ—Å—Ç** —Ñ–∞–π–ª—É (Ctrl+A, Ctrl+C)

### –ö—Ä–æ–∫ 4: –í—Å—Ç–∞–≤—Ç–µ —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—é

1. –í—Å—Ç–∞–≤—Ç–µ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π –∫–æ–¥ —É SQL Editor (Ctrl+V)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–æ–¥ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Run** (–∞–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+Enter)

### –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏:
```
Success. No rows returned
```

–Ø–∫—â–æ —î –ø–æ–º–∏–ª–∫–∏, –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –ø–æ–∫–∞–∑–∞–Ω—ñ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º.

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ SQL Editor

–í–∏–∫–æ–Ω–∞–π—Ç–µ —Ü–µ–π SQL –∑–∞–ø–∏—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω–¥–µ–∫—Å—ñ–≤:

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–Ω–¥–µ–∫—Å—ñ–≤ –¥–ª—è assigned_tasks
SELECT 
    indexname, 
    indexdef 
FROM pg_indexes 
WHERE tablename = 'assigned_tasks' 
    AND schemaname = 'public'
ORDER BY indexname;
```

–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏ –Ω–æ–≤—ñ —ñ–Ω–¥–µ–∫—Å–∏:
- `idx_assigned_tasks_client_id_is_active`
- `idx_assigned_tasks_executor_id_group_id`
- `idx_assigned_tasks_client_id_group_id`
- `idx_assigned_tasks_group_id_is_active`
- `idx_assigned_tasks_created_at_desc`
- `idx_assigned_tasks_executor_id_created_at`
- `idx_assigned_tasks_group_id_created_at`

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:

```bash
npm run test:performance
```

–Ø–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞ —É—Å–ø—ñ—à–Ω–æ, –≤—Å—ñ —Ç–µ—Å—Ç–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø—Ä–æ–π—Ç–∏ –∑ —á–∞—Å–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è < 100ms.

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

1. **–ë–µ–∑–ø–µ–∫–∞**: –ú—ñ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `CREATE INDEX IF NOT EXISTS`, —Ç–æ–º—É –≤–æ–Ω–∞ –±–µ–∑–ø–µ—á–Ω–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
2. **–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å
3. **–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è**: PostgreSQL –º–æ–∂–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤, –∞–ª–µ —Ü–µ –∑–∞–∑–≤–∏—á–∞–π –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è
4. **–†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è**: –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑—Ä–æ–±–∏—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é –ë–î –ø–µ—Ä–µ–¥ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è–º –º—ñ–≥—Ä–∞—Ü—ñ—ó (—Ö–æ—á–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è –±–µ–∑–ø–µ—á–Ω–∞)

## üîç –Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏

### –ü–æ–º–∏–ª–∫–∞: "relation does not exist"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ç–∞–±–ª–∏—Ü—ñ `assigned_tasks`, `users`, `tasks` —ñ—Å–Ω—É—é—Ç—å

### –ü–æ–º–∏–ª–∫–∞: "index already exists"
- –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –º—ñ–≥—Ä–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `IF NOT EXISTS`
- –Ü–Ω–¥–µ–∫—Å–∏ –≤–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ, –º–æ–∂–Ω–∞ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏

### –ü–æ–º–∏–ª–∫–∞: "permission denied"
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –∞–∫–∞—É–Ω—Ç
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —É –≤–∞—Å —î –ø—Ä–∞–≤–∞ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤

## üìä –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó:
- ‚úÖ –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –∑–±—ñ–ª—å—à–∏—Ç—å—Å—è –Ω–∞ 30-50%
- ‚úÖ –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º—É—Ç—å —à–≤–∏–¥—à–µ
- ‚úÖ –ú–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ë–î –ø—Ä–∏ —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Logs
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤—Å—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ
3. –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é —á–∞—Å—Ç–∏–Ω–∞–º–∏ (–ø–æ –æ–¥–Ω–æ–º—É —ñ–Ω–¥–µ–∫—Å—É)

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**: 2024
**–í–µ—Ä—Å—ñ—è –º—ñ–≥—Ä–∞—Ü—ñ—ó**: 019
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –¥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è ‚úÖ

